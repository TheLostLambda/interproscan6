params {
    ipscn_version = '6.0.0'
    applications = 'AntiFam,CDD,Coils,FunFam,Gene3D,HAMAP,NCBIfam,Panther,Pfam,PIRSF,PIRSR,PRINTS,PROSITE_PATTERNS,PROSITE_Profiles,SFLD,SMART,SUPERFAMILY'
    batchsize = 5000
    datadir = "$projectDir/data"
    disable_precalc = false
    formats = 'json,tsv,xml'
    goterms = false
    help = false
    input = null
    nucleic = false
    signalp_mode = 'fast'
    outdir = '.'
    pathways = false
    translate {
        strand = 'both'
        methionine = false
        min_len = 30
        genetic_code = 1
    }
    version = false
    signalp_gpu = false
}

errorStrategy = { task.exitStatus in [143,137,104] && task.attempt <= 3 ? 'retry' : 'finish' }

profiles {
    local { includeConfig 'utilities/profiles/local.config' }
    slurm { includeConfig 'utilities/profiles/slurm.config' }
    docker { includeConfig 'utilities/profiles/docker.config' }
    singularity { includeConfig 'utilities/profiles/singularity.config' }
    apptainer { includeConfig 'utilities/profiles/apptainer.config' }
    ebi { includeConfig 'utilities/profiles/.ebi.config' }
}

process {
    withLabel: write_results {
        publishDir = [
            path: params.outdir,
            mode: 'copy'
        ]
    }
}

includeConfig 'interproscan/subworkflows/sequence_precalc/lookup.config'
includeConfig 'interproscan/subworkflows/sequence_analysis/members.config'
includeConfig 'interproscan/subworkflows/xrefs/xrefs.config'

trace {
    enabled = true
    fields = 'task_id,process,realtime,duration,status,cpus,%cpu,time,memory,%mem,rss,peak_rss,submit,start,complete,queue'
    file = 'ips6.trace.txt'
    overwrite = true   
}
